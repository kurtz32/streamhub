<!doctype html>
<html lang="en">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Stream Hub - Watch Movies &amp; TV Shows</title>
  <script src="/_sdk/element_sdk.js"></script><!-- ==================== CSS STYLES ==================== -->
  <style>
    /* ===== RESET & BASE STYLES ===== */
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #141414;
      color: #ffffff;
      overflow-x: hidden;
      box-sizing: border-box;
    }

    html, body {
      height: 100%;
    }

    /* ===== NAVIGATION BAR ===== */
    .navbar {
      position: fixed;
      top: 0;
      width: 100%;
      padding: 20px 4%;
      display: flex;
      justify-content: space-between;
      align-items: center;
      z-index: 1000;
      background: linear-gradient(180deg, rgba(0,0,0,0.8) 0%, transparent 100%);
      transition: background 0.3s ease;
    }

    .navbar.scrolled {
      background: #141414;
    }

    .logo {
      font-size: 32px;
      font-weight: bold;
      letter-spacing: 2px;
    }

    /* ===== SEARCH BOX ===== */
    .search-box {
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .view-toggle {
      padding: 10px 16px;
      background: rgba(229,9,20,0.2);
      border: 2px solid #e50914;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
      display: flex;
      align-items: center;
      gap: 8px;
    }

    .view-toggle:hover {
      background: rgba(229,9,20,0.4);
    }

    .search-input {
      padding: 10px 16px;
      border: 2px solid #333;
      background: rgba(0,0,0,0.5);
      color: white;
      border-radius: 4px;
      font-size: 14px;
      width: 250px;
      transition: all 0.3s ease;
    }

    .search-input:focus {
      outline: none;
      border-color: #e50914;
      background: rgba(0,0,0,0.8);
    }

    .search-btn {
      padding: 10px 20px;
      background: #e50914;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .search-btn:hover {
      background: #f40612;
      transform: scale(1.05);
    }

    /* ===== HERO SECTION ===== */
    .hero {
      height: 80%;
      position: relative;
      display: flex;
      align-items: center;
      padding: 0 4%;
      background: linear-gradient(rgba(0,0,0,0.4), rgba(20,20,20,1)),
                  url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1200 600"><rect fill="%23000" width="1200" height="600"/><circle cx="200" cy="150" r="100" fill="%23333" opacity="0.3"/><circle cx="800" cy="400" r="150" fill="%23222" opacity="0.3"/><circle cx="1000" cy="200" r="80" fill="%23444" opacity="0.3"/></svg>');
      background-size: cover;
      background-position: center;
    }

    .hero-content {
      max-width: 600px;
      z-index: 1;
    }

    .hero-title {
      font-size: 48px;
      font-weight: bold;
      margin-bottom: 16px;
      line-height: 1.2;
    }

    .hero-subtitle {
      font-size: 24px;
      margin-bottom: 30px;
      opacity: 0.9;
    }

    .hero-btn {
      padding: 14px 32px;
      background: #e50914;
      border: none;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 18px;
      font-weight: 600;
      transition: all 0.3s ease;
      margin-right: 12px;
    }

    .hero-btn:hover {
      background: #f40612;
      transform: scale(1.05);
    }

    /* ===== CONTENT SECTIONS ===== */
    .section {
      padding: 40px 4%;
      margin-bottom: 20px;
    }

    .section-title {
      font-size: 24px;
      font-weight: 600;
      margin-bottom: 20px;
      padding-left: 4px;
    }

    .content-row {
      display: flex;
      gap: 12px;
      overflow-x: auto;
      padding: 8px 0;
      scrollbar-width: thin;
      scrollbar-color: #e50914 #2a2a2a;
      transition: all 0.3s ease;
    }

    .content-row.grid-view {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
      overflow-x: visible;
    }

    .content-row::-webkit-scrollbar {
      height: 8px;
    }

    .content-row::-webkit-scrollbar-track {
      background: #2a2a2a;
      border-radius: 4px;
    }

    .content-row::-webkit-scrollbar-thumb {
      background: #e50914;
      border-radius: 4px;
    }

    /* ===== MOVIE/TV CARDS ===== */
    .content-card {
      min-width: 200px;
      border-radius: 8px;
      overflow: hidden;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .grid-view .content-card {
      min-width: unset;
      width: 100%;
    }

    .content-card:hover {
      transform: scale(1.08);
      z-index: 10;
    }

    .content-card img {
      width: 100%;
      height: 300px;
      object-fit: cover;
      display: block;
    }

    .content-info {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      padding: 16px;
      background: linear-gradient(transparent, rgba(0,0,0,0.9));
      opacity: 0;
      transition: opacity 0.3s ease;
    }

    .content-card:hover .content-info {
      opacity: 1;
    }

    .content-title {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .content-rating {
      font-size: 12px;
      color: #46d369;
    }

    /* ===== DETAILS PAGE ===== */
    .details-page {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #141414;
      z-index: 2000;
      overflow-y: auto;
    }

    .back-btn {
      position: fixed;
      top: 20px;
      left: 4%;
      padding: 12px 24px;
      background: rgba(0,0,0,0.8);
      border: 2px solid #e50914;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 16px;
      font-weight: 600;
      z-index: 100;
      transition: all 0.3s ease;
    }

    .back-btn:hover {
      background: #e50914;
      transform: translateX(-5px);
    }

    .details-hero {
      height: 70%;
      background-size: cover;
      background-position: center;
      position: relative;
      display: flex;
      align-items: flex-end;
    }

    .details-overlay {
      width: 100%;
      background: linear-gradient(transparent 0%, rgba(20,20,20,0.8) 50%, #141414 100%);
      padding: 60px 4% 40px;
    }

    .details-content {
      max-width: 900px;
    }

    .details-title {
      font-size: 48px;
      font-weight: bold;
      margin-bottom: 16px;
      line-height: 1.2;
    }

    .details-meta {
      display: flex;
      gap: 20px;
      margin-bottom: 20px;
      font-size: 16px;
      flex-wrap: wrap;
    }

    .details-rating {
      color: #46d369;
      font-weight: 600;
      font-size: 18px;
    }

    .details-overview {
      font-size: 18px;
      line-height: 1.8;
      margin-bottom: 24px;
      max-width: 800px;
      opacity: 0.95;
    }

    .details-genres {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
    }

    .genre-tag {
      padding: 8px 16px;
      background: rgba(229,9,20,0.2);
      border: 1px solid #e50914;
      border-radius: 20px;
      font-size: 14px;
    }

    .details-section {
      padding: 40px 4%;
    }

    .play-btn {
      padding: 16px 48px;
      background: #e50914;
      border: none;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-size: 20px;
      font-weight: 700;
      transition: all 0.3s ease;
      margin-bottom: 40px;
      display: inline-flex;
      align-items: center;
      gap: 12px;
      box-shadow: 0 4px 12px rgba(229,9,20,0.4);
    }

    .play-btn:hover {
      background: #f40612;
      transform: scale(1.05);
      box-shadow: 0 6px 20px rgba(229,9,20,0.6);
    }

    /* ===== STREAMING PLAYER PAGE ===== */
    .player-page {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: #0a0a0a;
      z-index: 3000;
      overflow-y: auto;
    }

    .player-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding: 20px 4%;
      background: rgba(0,0,0,0.9);
      border-bottom: 2px solid #222;
    }

    .player-title {
      font-size: 24px;
      font-weight: bold;
    }

    .close-player-btn {
      padding: 10px 20px;
      background: rgba(229,9,20,0.2);
      border: 2px solid #e50914;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .close-player-btn:hover {
      background: #e50914;
    }

    .player-container {
      display: grid;
      grid-template-columns: 1fr 350px;
      gap: 20px;
      padding: 20px 4%;
      height: calc(100% - 80px);
    }

    .video-section {
      display: flex;
      flex-direction: column;
      gap: 20px;
    }

    .video-player {
      width: 100%;
      aspect-ratio: 16/9;
      background: #000;
      border-radius: 8px;
      overflow: hidden;
      position: relative;
    }

    .video-player iframe {
      width: 100%;
      height: 100%;
      border: none;
      pointer-events: auto;
    }

    /* Block iframe popup ads */
    .video-player {
      position: relative;
    }

    .video-player::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      pointer-events: none;
      z-index: 1;
    }

    .player-info {
      background: #141414;
      padding: 20px;
      border-radius: 8px;
      border: 1px solid #222;
    }

    .player-info h2 {
      font-size: 20px;
      margin-bottom: 12px;
      color: #e50914;
    }

    .player-info p {
      opacity: 0.8;
      line-height: 1.6;
    }

    .sources-sidebar {
      background: #141414;
      border-radius: 8px;
      border: 1px solid #222;
      padding: 20px;
      overflow-y: auto;
      max-height: 100%;
    }

    .sources-header {
      text-align: center;
      margin-bottom: 20px;
      padding-bottom: 15px;
      border-bottom: 2px solid #222;
    }

    .sources-header h3 {
      font-size: 18px;
      margin-bottom: 8px;
      color: #e50914;
    }

    .sources-header p {
      font-size: 13px;
      opacity: 0.7;
    }

    .source-buttons {
      display: flex;
      gap: 10px;
      margin-bottom: 20px;
    }

    .source-action-btn {
      flex: 1;
      padding: 10px;
      background: rgba(229,9,20,0.1);
      border: 1px solid #e50914;
      color: white;
      border-radius: 6px;
      cursor: pointer;
      font-size: 12px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .source-action-btn:hover {
      background: rgba(229,9,20,0.3);
    }

    .sources-list {
      display: flex;
      flex-direction: column;
      gap: 8px;
    }

    .source-item {
      padding: 14px;
      background: #1a1a1a;
      border: 2px solid #222;
      border-radius: 6px;
      cursor: pointer;
      transition: all 0.3s ease;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .source-item:hover {
      border-color: #e50914;
      background: #222;
      transform: translateX(5px);
    }

    .source-item.active {
      background: rgba(229,9,20,0.2);
      border-color: #e50914;
    }

    .source-name {
      font-weight: 600;
      font-size: 14px;
    }

    .source-status {
      font-size: 11px;
      padding: 4px 10px;
      background: rgba(70,211,105,0.2);
      border: 1px solid #46d369;
      border-radius: 12px;
      color: #46d369;
    }

    .source-item.active .source-status {
      background: rgba(229,9,20,0.3);
      border-color: #e50914;
      color: #e50914;
    }

    @media (max-width: 1024px) {
      .player-container {
        grid-template-columns: 1fr;
      }

      .sources-sidebar {
        max-height: 400px;
      }
    }

    .cast-row {
      display: flex;
      gap: 16px;
      overflow-x: auto;
      padding: 8px 0;
      scrollbar-width: thin;
      scrollbar-color: #e50914 #2a2a2a;
    }

    .cast-row::-webkit-scrollbar {
      height: 8px;
    }

    .cast-row::-webkit-scrollbar-track {
      background: #2a2a2a;
      border-radius: 4px;
    }

    .cast-row::-webkit-scrollbar-thumb {
      background: #e50914;
      border-radius: 4px;
    }

    .cast-card {
      min-width: 150px;
      text-align: center;
      transition: transform 0.3s ease;
    }

    .cast-card:hover {
      transform: scale(1.05);
    }

    .cast-card img {
      width: 150px;
      height: 150px;
      border-radius: 50%;
      object-fit: cover;
      margin-bottom: 12px;
      border: 3px solid #333;
      transition: border-color 0.3s ease;
    }

    .cast-card:hover img {
      border-color: #e50914;
    }

    .cast-name {
      font-size: 14px;
      font-weight: 600;
      margin-bottom: 4px;
    }

    .cast-character {
      font-size: 12px;
      opacity: 0.7;
    }

    .trailer-container {
      position: relative;
      padding-bottom: 56.25%;
      height: 0;
      overflow: hidden;
      max-width: 100%;
      background: #000;
      border-radius: 8px;
    }

    .trailer-container iframe {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
    }

    .no-trailer {
      padding: 60px;
      text-align: center;
      background: #1a1a1a;
      border-radius: 8px;
      opacity: 0.6;
    }

    /* ===== UTILITY CLASSES ===== */
    .loading {
      text-align: center;
      padding: 40px;
      font-size: 18px;
      opacity: 0.6;
    }

    .error-message {
      background: rgba(229,9,20,0.2);
      border: 1px solid #e50914;
      padding: 16px;
      border-radius: 4px;
      margin: 20px 4%;
      text-align: center;
    }

    /* ===== FILTERS ===== */
    .filters {
      display: flex;
      gap: 12px;
      margin-bottom: 20px;
      flex-wrap: wrap;
      align-items: center;
    }

    .filter-select {
      padding: 8px 12px;
      background: rgba(0,0,0,0.5);
      border: 2px solid #333;
      color: white;
      border-radius: 4px;
      font-size: 14px;
      cursor: pointer;
      transition: all 0.3s ease;
      min-width: 120px;
    }

    .filter-select:focus {
      outline: none;
      border-color: #e50914;
      background: rgba(0,0,0,0.8);
    }

    .filter-select:hover {
      border-color: #e50914;
    }

    .filter-toggle {
      padding: 8px 16px;
      background: rgba(229,9,20,0.2);
      border: 2px solid #e50914;
      color: white;
      border-radius: 4px;
      cursor: pointer;
      font-size: 14px;
      font-weight: 600;
      transition: all 0.3s ease;
    }

    .filter-toggle:hover {
      background: rgba(229,9,20,0.4);
    }

    .filter-toggle.active {
      background: #e50914;
    }

    /* ===== RESPONSIVE DESIGN ===== */
    @media (max-width: 768px) {
      .hero-title {
        font-size: 32px;
      }

      .hero-subtitle {
        font-size: 18px;
      }

      .search-input {
        width: 150px;
      }

      .content-card {
        min-width: 150px;
      }

      .content-card img {
        height: 225px;
      }

      .details-title {
        font-size: 28px;
      }

      .details-overview {
        font-size: 16px;
      }

      .cast-card {
        min-width: 120px;
      }

      .cast-card img {
        width: 120px;
        height: 120px;
      }

      .filters {
        flex-direction: column;
        align-items: stretch;
      }

      .filter-select {
        min-width: unset;
        width: 100%;
      }
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
  <script src="https://cdn.tailwindcss.com" type="text/javascript"></script>
 </head>
 <body><!-- ==================== NAVIGATION ==================== -->
  <nav class="navbar" id="navbar">
   <div class="logo" id="siteName">
    Stream Hub
   </div>
   <div class="search-box"><input type="text" class="search-input" id="searchInput" placeholder="Search movies, TV shows..."> <button class="search-btn" id="searchBtn">Search</button> <button class="view-toggle" id="viewToggle"> <span id="viewIcon">üìã</span> <span id="viewText">List View</span> </button>
   </div>
  </nav><!-- ==================== HERO SECTION ==================== -->
  <div class="hero">
   <div class="hero-content">
    <h1 class="hero-title" id="heroTitle">Unlimited movies, TV shows, and more</h1>
    <p class="hero-subtitle" id="heroSubtitle">Watch anywhere. Cancel anytime.</p><button class="hero-btn">Get Started</button>
   </div>
  </div><!-- ==================== CONTENT SECTIONS ==================== -->
  <div class="section">
   <h2 class="section-title">New Releases</h2>
   <div class="content-row" id="newReleases"></div>
  </div>
  <div class="section">
   <h2 class="section-title">Trending Now</h2>
   <div class="content-row" id="trending"></div>
  </div>
  <div class="section">
   <h2 class="section-title">Popular Movies</h2>
   <div class="content-row" id="popular"></div>
  </div>
  <div class="section">
   <h2 class="section-title">Top Rated</h2>
   <div class="content-row" id="topRated"></div>
  </div>
  <div class="section">
   <h2 class="section-title">Upcoming</h2>
   <div class="content-row" id="upcoming"></div>
  </div>

  <div class="player-page" id="playerPage" style="display: none;">
   <div class="player-header">
    <h1 class="player-title" id="playerMovieTitle"></h1><button class="close-player-btn" id="closePlayerBtn">‚úï Close Player</button>
   </div>
   <div class="player-container">
    <div class="video-section">
     <div class="video-player" id="videoPlayer"><iframe id="videoIframe" allowfullscreen></iframe>
     </div>
     <div class="player-info">
      <h2>View Details</h2>
      <p id="playerMovieDetails"></p>
     </div>
    </div>
    <div class="sources-sidebar">
     <div class="sources-header">
      <h3>Streaming Sources</h3>
      <p>Select your preferred streaming source</p>
     </div>
     <div class="source-buttons"><button class="source-action-btn">View Details</button> <button class="source-action-btn">Watch Party</button>
     </div>
     <div class="sources-list" id="sourcesList"></div>
    </div>
   </div>
  </div><!-- ==================== CAST PAGE ==================== -->
  <div class="details-page" id="castPage" style="display: none;"><button class="back-btn" id="backFromCastBtn">‚Üê Back</button>
   <div class="details-hero" id="castHero">
    <div class="details-overlay">
     <div class="details-content">
      <h1 class="details-title" id="castName"></h1>
      <div class="details-meta"><span id="castKnownFor"></span> <span id="castBirthday"></span>
      </div>
      <p class="details-overview" id="castBio"></p>
     </div>
    </div>
   </div>
   <div class="details-section">
    <h2 class="section-title">Movies</h2>
    <div class="content-row" id="castMovies"></div>
   </div>
   <div class="details-section">
    <h2 class="section-title">TV Shows</h2>
    <div class="content-row" id="castTVShows"></div>
   </div>
  </div><!-- ==================== DETAILS PAGE ==================== -->
  <div class="details-page" id="detailsPage" style="display: none;"><button class="back-btn" id="backBtn">‚Üê Back</button>
   <div class="details-hero" id="detailsHero">
    <div class="details-overlay">
     <div class="details-content">
      <h1 class="details-title" id="detailsTitle"></h1>
      <div class="details-meta"><span class="details-rating" id="detailsRating"></span> <span id="detailsDate"></span> <span id="detailsRuntime"></span>
      </div>
      <p class="details-overview" id="detailsOverview"></p>
      <div class="details-genres" id="detailsGenres"></div>
     </div>
    </div>
   </div>
   <div class="details-section"><button class="play-btn" id="playBtn">‚ñ∂ Play Now</button>
    <h2 class="section-title">Cast</h2>
    <div class="cast-row" id="castRow"></div>
   </div>
   <div class="details-section">
    <h2 class="section-title">Trailer</h2>
    <div class="trailer-container" id="trailerContainer"></div>
   </div>
   <div class="details-section">
    <h2 class="section-title">Similar Content</h2>
    <div class="content-row" id="similarContent"></div>
   </div>
  </div><!-- ==================== JAVASCRIPT ==================== -->
  <script>
    // ===== API CONFIGURATION =====
    const API_KEY = 'ce92539c90889cc88a401b0a7f040bb7';
    const BASE_URL = 'https://api.themoviedb.org/3';
    const IMG_URL = 'https://image.tmdb.org/t/p/w500';
    const BACKDROP_URL = 'https://image.tmdb.org/t/p/original';

    // ===== STREAMING SOURCES =====
    const streamingSources = [
      { 
        name: 'VidSrc.xyz', 
        movieUrl: 'https://vidsrc.xyz/embed/movie/{id}',
        tvUrl: 'https://vidsrc.xyz/embed/tv/{id}',
        active: true 
      },
      { 
        name: 'VidSrc.to', 
        movieUrl: 'https://vidsrc.to/embed/movie/{id}',
        tvUrl: 'https://vidsrc.to/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'VidSrc.net', 
        movieUrl: 'https://vidsrc.net/embed/movie/{id}',
        tvUrl: 'https://vidsrc.net/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'VidSrc.icu', 
        movieUrl: 'https://vidsrc.icu/embed/movie/{id}',
        tvUrl: 'https://vidsrc.icu/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'VidSrc.dev', 
        movieUrl: 'https://vidsrc.dev/embed/movie/{id}',
        tvUrl: 'https://vidsrc.dev/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'MoviesAPI', 
        movieUrl: 'https://moviesapi.club/movie/{id}',
        tvUrl: 'https://moviesapi.club/tv/{id}',
        active: false 
      },
      { 
        name: 'VidSrc.pro', 
        movieUrl: 'https://vidsrc.pro/embed/movie/{id}',
        tvUrl: 'https://vidsrc.pro/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'VidSrc.pm', 
        movieUrl: 'https://vidsrc.pm/embed/movie/{id}',
        tvUrl: 'https://vidsrc.pm/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'VidSrc.me', 
        movieUrl: 'https://vidsrc.me/embed/movie?tmdb={id}',
        tvUrl: 'https://vidsrc.me/embed/tv?tmdb={id}',
        active: false 
      },
      { 
        name: 'VidSrc.in', 
        movieUrl: 'https://vidsrc.in/embed/movie/{id}',
        tvUrl: 'https://vidsrc.in/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'VidSrc.cc', 
        movieUrl: 'https://vidsrc.cc/v2/embed/movie/{id}',
        tvUrl: 'https://vidsrc.cc/v2/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'Embed.su', 
        movieUrl: 'https://embed.su/embed/movie/{id}',
        tvUrl: 'https://embed.su/embed/tv/{id}',
        active: false 
      },
      { 
        name: '2Embed', 
        movieUrl: 'https://www.2embed.cc/embed/{id}',
        tvUrl: 'https://www.2embed.cc/embedtv/{id}',
        active: false 
      },
      { 
        name: '2Embed v2', 
        movieUrl: 'https://2embed.org/embed/movie?tmdb={id}',
        tvUrl: 'https://2embed.org/embed/series?tmdb={id}',
        active: false 
      },
      { 
        name: 'AutoEmbed', 
        movieUrl: 'https://autoembed.co/movie/tmdb/{id}',
        tvUrl: 'https://autoembed.co/tv/tmdb/{id}',
        active: false 
      },
      { 
        name: 'NontonGo', 
        movieUrl: 'https://www.NontonGo.win/embed/movie/{id}',
        tvUrl: 'https://www.NontonGo.win/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'Smash Stream', 
        movieUrl: 'https://player.smashy.stream/movie/{id}',
        tvUrl: 'https://player.smashy.stream/tv/{id}',
        active: false 
      },
      { 
        name: 'VidLink', 
        movieUrl: 'https://vidlink.pro/movie/{id}',
        tvUrl: 'https://vidlink.pro/tv/{id}',
        active: false 
      },
      { 
        name: 'SuperEmbed', 
        movieUrl: 'https://multiembed.mov/?video_id={id}&tmdb=1',
        tvUrl: 'https://multiembed.mov/?video_id={id}&tmdb=1&s=1',
        active: false 
      },
      { 
        name: 'Embedsoap', 
        movieUrl: 'https://www.embedsoap.com/embed/movie/?id={id}',
        tvUrl: 'https://www.embedsoap.com/embed/series/?id={id}',
        active: false 
      },
      { 
        name: 'VidSrc Pro v2', 
        movieUrl: 'https://vidsrc.vip/embed/movie/{id}',
        tvUrl: 'https://vidsrc.vip/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'VidSrc Rip', 
        movieUrl: 'https://vidsrc.rip/embed/movie/{id}',
        tvUrl: 'https://vidsrc.rip/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'Filmku', 
        movieUrl: 'https://filmku.stream/embed/movie/{id}',
        tvUrl: 'https://filmku.stream/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'MovieE', 
        movieUrl: 'https://movieu.xyz/embed/movie/{id}',
        tvUrl: 'https://movieu.xyz/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'VidPlay', 
        movieUrl: 'https://vidplay.online/e/movie/{id}',
        tvUrl: 'https://vidplay.online/e/tv/{id}',
        active: false 
      },
      { 
        name: 'VidCloud', 
        movieUrl: 'https://vidcloud9.org/embed/movie/{id}',
        tvUrl: 'https://vidcloud9.org/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'RiveStream', 
        movieUrl: 'https://rivestream.live/watch?type=movie&id={id}',
        tvUrl: 'https://rivestream.live/watch?type=tv&id={id}',
        active: false 
      },
      { 
        name: 'Gomo Stream', 
        movieUrl: 'https://gomo.to/movie/{id}',
        tvUrl: 'https://gomo.to/show/{id}',
        active: false 
      },
      { 
        name: 'VidSrc NL', 
        movieUrl: 'https://vidsrc.nl/embed/movie/{id}',
        tvUrl: 'https://vidsrc.nl/embed/tv/{id}',
        active: false 
      },
      { 
        name: 'Warezcdn', 
        movieUrl: 'https://warezcdn.com/embed/movie/{id}',
        tvUrl: 'https://warezcdn.com/embed/serie/{id}',
        active: false 
      }
    ];

    let currentMovie = null;

    // ===== CONFIGURATION & SDK SETUP =====
    const defaultConfig = {
      site_name: 'Stream Hub',
      hero_title: 'Unlimited movies, TV shows, and more',
      hero_subtitle: 'Watch anywhere. Cancel anytime.',
      primary_color: '#e50914',
      background_color: '#141414',
      text_color: '#ffffff',
      surface_color: '#181818',
      accent_color: '#46d369',
      font_family: 'Segoe UI',
      font_size: 16
    };

    let config = { ...defaultConfig };

    // ===== CONFIG CHANGE HANDLER =====
    async function onConfigChange(newConfig) {
      config = { ...newConfig };
      
      const baseSize = config.font_size || defaultConfig.font_size;
      const customFont = config.font_family || defaultConfig.font_family;
      const baseFontStack = 'Tahoma, Geneva, Verdana, sans-serif';
      
      // Update body styles
      document.body.style.background = config.background_color || defaultConfig.background_color;
      document.body.style.color = config.text_color || defaultConfig.text_color;
      document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;
      document.body.style.fontSize = `${baseSize}px`;
      
      // Update text content
      document.getElementById('siteName').textContent = config.site_name || defaultConfig.site_name;
      document.getElementById('heroTitle').textContent = config.hero_title || defaultConfig.hero_title;
      document.getElementById('heroSubtitle').textContent = config.hero_subtitle || defaultConfig.hero_subtitle;
      
      // Update colors
      const primaryColor = config.primary_color || defaultConfig.primary_color;
      const surfaceColor = config.surface_color || defaultConfig.surface_color;
      const accentColor = config.accent_color || defaultConfig.accent_color;
      
      document.querySelectorAll('.search-btn, .hero-btn').forEach(btn => {
        btn.style.background = primaryColor;
      });
      
      document.querySelectorAll('.search-input').forEach(input => {
        input.style.background = `rgba(0,0,0,0.5)`;
        input.style.color = config.text_color || defaultConfig.text_color;
      });
      
      const modal = document.querySelector('.modal-content');
      if (modal) {
        modal.style.background = surfaceColor;
      }
      
      document.querySelectorAll('.content-rating, .modal-rating').forEach(rating => {
        rating.style.color = accentColor;
      });
      
      // Update font sizes
      document.querySelectorAll('.hero-title').forEach(el => {
        el.style.fontSize = `${baseSize * 3}px`;
      });
      
      document.querySelectorAll('.hero-subtitle').forEach(el => {
        el.style.fontSize = `${baseSize * 1.5}px`;
      });
      
      document.querySelectorAll('.section-title').forEach(el => {
        el.style.fontSize = `${baseSize * 1.5}px`;
      });
      
      document.querySelectorAll('.modal-title').forEach(el => {
        el.style.fontSize = `${baseSize * 2.25}px`;
      });
    }

    // ===== CAPABILITIES MAPPING =====
    function mapToCapabilities(config) {
      return {
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.surface_color || defaultConfig.surface_color,
            set: (value) => {
              config.surface_color = value;
              window.elementSdk.setConfig({ surface_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.primary_color || defaultConfig.primary_color,
            set: (value) => {
              config.primary_color = value;
              window.elementSdk.setConfig({ primary_color: value });
            }
          },
          {
            get: () => config.accent_color || defaultConfig.accent_color,
            set: (value) => {
              config.accent_color = value;
              window.elementSdk.setConfig({ accent_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => {
            config.font_size = value;
            window.elementSdk.setConfig({ font_size: value });
          }
        }
      };
    }

    // ===== EDIT PANEL VALUES MAPPING =====
    function mapToEditPanelValues(config) {
      return new Map([
        ['site_name', config.site_name || defaultConfig.site_name],
        ['hero_title', config.hero_title || defaultConfig.hero_title],
        ['hero_subtitle', config.hero_subtitle || defaultConfig.hero_subtitle]
      ]);
    }

    // ===== INITIALIZE SDK =====
    if (window.elementSdk) {
      window.elementSdk.init({
        defaultConfig,
        onConfigChange,
        mapToCapabilities,
        mapToEditPanelValues
      });
    }

    // ===== API FUNCTIONS =====
    async function fetchMovies(endpoint) {
      try {
        const response = await fetch(`${BASE_URL}${endpoint}?api_key=${API_KEY}`);
        if (!response.ok) {
          throw new Error('Failed to fetch movies');
        }
        const data = await response.json();
        return data.results;
      } catch (error) {
        console.error('Error fetching movies:', error);
        return [];
      }
    }

    // ===== UI CREATION FUNCTIONS =====
    function createContentCard(item) {
      const card = document.createElement('div');
      card.className = 'content-card';
      card.onclick = () => showDetailsPage(item);
      
      const img = document.createElement('img');
      img.src = item.poster_path ? `${IMG_URL}${item.poster_path}` : 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 200 300"><rect fill="%23333" width="200" height="300"/><text x="50%" y="50%" text-anchor="middle" fill="%23666" font-size="16">No Image</text></svg>';
      img.alt = item.title || item.name;
      img.onerror = function() {
        this.src = '';
        this.alt = 'Image failed to load';
      };
      
      const info = document.createElement('div');
      info.className = 'content-info';
      
      const title = document.createElement('div');
      title.className = 'content-title';
      title.textContent = item.title || item.name;
      
      const rating = document.createElement('div');
      rating.className = 'content-rating';
      rating.textContent = `ÔøΩÔøΩ ${item.vote_average ? item.vote_average.toFixed(1) : 'N/A'}`;
      
      info.appendChild(title);
      info.appendChild(rating);
      card.appendChild(img);
      card.appendChild(info);
      
      return card;
    }

    function createCastCard(cast) {
      const card = document.createElement('div');
      card.className = 'cast-card';
      card.style.cursor = 'pointer';
      card.onclick = () => showCastPage(cast);
      
      const img = document.createElement('img');
      img.src = cast.profile_path ? `${IMG_URL}${cast.profile_path}` : 'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 150 150"><circle cx="75" cy="75" r="75" fill="%23333"/><text x="50%" y="50%" text-anchor="middle" fill="%23666" font-size="20" dy=".3em">üë§</text></svg>';
      img.alt = cast.name;
      img.onerror = function() {
        this.src = '';
        this.alt = 'Image failed to load';
      };
      
      const name = document.createElement('div');
      name.className = 'cast-name';
      name.textContent = cast.name;
      
      const character = document.createElement('div');
      character.className = 'cast-character';
      character.textContent = cast.character;
      
      card.appendChild(img);
      card.appendChild(name);
      card.appendChild(character);
      
      return card;
    }

    // ===== CAST PAGE FUNCTIONS =====
    async function showCastPage(cast) {
      const castId = cast.id;
      
      // Hide all other pages
      document.querySelector('.navbar').style.display = 'none';
      document.querySelector('.hero').style.display = 'none';
      document.querySelectorAll('.section').forEach(section => section.style.display = 'none');
      document.getElementById('detailsPage').style.display = 'none';
      document.getElementById('playerPage').style.display = 'none';
      document.getElementById('castPage').style.display = 'block';
      window.scrollTo(0, 0);
      
      try {
        // Fetch cast details
        const detailsResponse = await fetch(`${BASE_URL}/person/${castId}?api_key=${API_KEY}`);
        const details = await detailsResponse.json();
        
        // Fetch cast credits
        const creditsResponse = await fetch(`${BASE_URL}/person/${castId}/movie_credits?api_key=${API_KEY}`);
        const movieCredits = await creditsResponse.json();
        
        const tvCreditsResponse = await fetch(`${BASE_URL}/person/${castId}/tv_credits?api_key=${API_KEY}`);
        const tvCredits = await tvCreditsResponse.json();
        
        // Set background
        const castHero = document.getElementById('castHero');
        castHero.style.backgroundImage = details.profile_path 
          ? `url(${BACKDROP_URL}${details.profile_path})`
          : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
        
        // Set cast info
        document.getElementById('castName').textContent = details.name || 'Unknown';
        document.getElementById('castKnownFor').textContent = details.known_for_department || 'Actor';
        document.getElementById('castBirthday').textContent = details.birthday 
          ? `Born: ${new Date(details.birthday).toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' })}`
          : '';
        document.getElementById('castBio').textContent = details.biography || 'No biography available.';
        
        // Set movies
        const castMoviesContainer = document.getElementById('castMovies');
        castMoviesContainer.innerHTML = '';
        if (movieCredits.cast && movieCredits.cast.length > 0) {
          // Sort by popularity and filter out movies without posters
          const sortedMovies = movieCredits.cast
            .filter(movie => movie.poster_path)
            .sort((a, b) => (b.popularity || 0) - (a.popularity || 0))
            .slice(0, 20);
          
          sortedMovies.forEach(movie => {
            castMoviesContainer.appendChild(createContentCard({ ...movie, media_type: 'movie' }));
          });
        } else {
          castMoviesContainer.innerHTML = '<div class="loading">No movies found.</div>';
        }
        
        // Set TV shows
        const castTVShowsContainer = document.getElementById('castTVShows');
        castTVShowsContainer.innerHTML = '';
        if (tvCredits.cast && tvCredits.cast.length > 0) {
          // Sort by popularity and filter out shows without posters
          const sortedShows = tvCredits.cast
            .filter(show => show.poster_path)
            .sort((a, b) => (b.popularity || 0) - (a.popularity || 0))
            .slice(0, 20);
          
          sortedShows.forEach(show => {
            castTVShowsContainer.appendChild(createContentCard({ ...show, media_type: 'tv' }));
          });
        } else {
          castTVShowsContainer.innerHTML = '<div class="loading">No TV shows found.</div>';
        }
        
      } catch (error) {
        console.error('Error loading cast details:', error);
      }
    }

    function hideCastPage() {
      document.getElementById('castPage').style.display = 'none';
      document.getElementById('detailsPage').style.display = 'block';
      window.scrollTo(0, 0);
    }

    // ===== DETAILS PAGE FUNCTIONS =====
    async function showDetailsPage(item) {
      const mediaType = item.media_type || (item.title ? 'movie' : 'tv');
      const mediaId = item.id;
      
      // Hide home page and show details page
      document.querySelector('.navbar').style.display = 'none';
      document.querySelector('.hero').style.display = 'none';
      document.querySelectorAll('.section').forEach(section => section.style.display = 'none');
      document.getElementById('detailsPage').style.display = 'block';
      window.scrollTo(0, 0);
      
      // Fetch detailed information
      try {
        const detailsResponse = await fetch(`${BASE_URL}/${mediaType}/${mediaId}?api_key=${API_KEY}`);
        const details = await detailsResponse.json();
        
        const creditsResponse = await fetch(`${BASE_URL}/${mediaType}/${mediaId}/credits?api_key=${API_KEY}`);
        const credits = await creditsResponse.json();
        
        const videosResponse = await fetch(`${BASE_URL}/${mediaType}/${mediaId}/videos?api_key=${API_KEY}`);
        const videos = await videosResponse.json();
        
        const similarResponse = await fetch(`${BASE_URL}/${mediaType}/${mediaId}/similar?api_key=${API_KEY}`);
        const similar = await similarResponse.json();
        
        // Set backdrop
        const detailsHero = document.getElementById('detailsHero');
        detailsHero.style.backgroundImage = details.backdrop_path 
          ? `url(${BACKDROP_URL}${details.backdrop_path})`
          : 'linear-gradient(135deg, #667eea 0%, #764ba2 100%)';
        
        // Set title and meta
        document.getElementById('detailsTitle').textContent = details.title || details.name;
        document.getElementById('detailsRating').textContent = `‚≠ê ${details.vote_average ? details.vote_average.toFixed(1) : 'N/A'}/10`;
        document.getElementById('detailsDate').textContent = details.release_date || details.first_air_date || 'N/A';
        
        const runtime = details.runtime || (details.episode_run_time && details.episode_run_time[0]);
        document.getElementById('detailsRuntime').textContent = runtime ? `${runtime} min` : '';
        
        document.getElementById('detailsOverview').textContent = details.overview || 'No overview available.';
        
        // Set genres
        const genresContainer = document.getElementById('detailsGenres');
        genresContainer.innerHTML = '';
        if (details.genres && details.genres.length > 0) {
          details.genres.forEach(genre => {
            const tag = document.createElement('span');
            tag.className = 'genre-tag';
            tag.textContent = genre.name;
            genresContainer.appendChild(tag);
          });
        }
        
        // Set cast
        const castRow = document.getElementById('castRow');
        castRow.innerHTML = '';
        if (credits.cast && credits.cast.length > 0) {
          credits.cast.slice(0, 10).forEach(cast => {
            castRow.appendChild(createCastCard(cast));
          });
        } else {
          castRow.innerHTML = '<div class="loading">No cast information available.</div>';
        }
        
        // Set trailer
        const trailerContainer = document.getElementById('trailerContainer');
        trailerContainer.innerHTML = '';
        const trailer = videos.results && videos.results.length > 0 
          ? videos.results.find(video => video.site === 'YouTube' && (video.type === 'Trailer' || video.type === 'Teaser'))
          : null;
        
        if (trailer) {
          const iframe = document.createElement('iframe');
          iframe.src = `https://www.youtube.com/embed/${trailer.key}`;
          iframe.setAttribute('frameborder', '0');
          iframe.setAttribute('allow', 'accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share');
          iframe.setAttribute('allowfullscreen', 'true');
          iframe.setAttribute('referrerpolicy', 'strict-origin-when-cross-origin');
          iframe.style.position = 'absolute';
          iframe.style.top = '0';
          iframe.style.left = '0';
          iframe.style.width = '100%';
          iframe.style.height = '100%';
          iframe.style.border = 'none';
          trailerContainer.appendChild(iframe);
        } else {
          trailerContainer.innerHTML = '<div class="no-trailer">No trailer available</div>';
        }
        
        // Set similar content
        const similarContainer = document.getElementById('similarContent');
        similarContainer.innerHTML = '';
        if (similar.results && similar.results.length > 0) {
          similar.results.slice(0, 12).forEach(item => {
            similarContainer.appendChild(createContentCard(item));
          });
        } else {
          similarContainer.innerHTML = '<div class="loading">No similar content found.</div>';
        }

        // Set up play button
        document.getElementById('playBtn').onclick = () => {
          showPlayerPage(details);
        };
        
      } catch (error) {
        console.error('Error loading details:', error);
      }
    }

    function hideDetailsPage() {
      document.getElementById('detailsPage').style.display = 'none';
      document.querySelector('.navbar').style.display = 'flex';
      document.querySelector('.hero').style.display = 'flex';
      document.querySelectorAll('.section').forEach(section => section.style.display = 'block');
      window.scrollTo(0, 0);
    }

    // ===== PLAYER PAGE FUNCTIONS =====
    function showPlayerPage(movie) {
      currentMovie = movie;
      
      // Detect if it's a TV show or movie
      currentMovie.mediaType = movie.title ? 'movie' : 'tv';
      
      // Hide all other pages
      document.querySelector('.navbar').style.display = 'none';
      document.querySelector('.hero').style.display = 'none';
      document.querySelectorAll('.section').forEach(section => section.style.display = 'none');
      document.getElementById('detailsPage').style.display = 'none';
      document.getElementById('playerPage').style.display = 'block';
      window.scrollTo(0, 0);
      
      // Set movie info
      document.getElementById('playerMovieTitle').textContent = movie.title || movie.name;
      document.getElementById('playerMovieDetails').textContent = movie.overview || 'No details available.';
      
      // Generate sources list
      const sourcesList = document.getElementById('sourcesList');
      sourcesList.innerHTML = '';
      
      streamingSources.forEach((source, index) => {
        const sourceItem = document.createElement('div');
        sourceItem.className = `source-item ${source.active ? 'active' : ''}`;
        
        const sourceName = document.createElement('div');
        sourceName.className = 'source-name';
        sourceName.textContent = source.name;
        
        const sourceStatus = document.createElement('div');
        sourceStatus.className = 'source-status';
        sourceStatus.textContent = source.active ? 'Active' : 'Click to switch';
        
        sourceItem.appendChild(sourceName);
        sourceItem.appendChild(sourceStatus);
        
        sourceItem.onclick = () => switchSource(index);
        
        sourcesList.appendChild(sourceItem);
      });
      
      // Load first active source
      const activeSource = streamingSources.find(s => s.active);
      if (activeSource && movie.id) {
        const url = currentMovie.mediaType === 'movie' 
          ? activeSource.movieUrl.replace('{id}', movie.id)
          : activeSource.tvUrl.replace('{id}', movie.id);
        loadVideoSource(url);
      }
    }

    function switchSource(index) {
      // Update active state
      streamingSources.forEach((source, i) => {
        source.active = i === index;
      });
      
      // Update UI
      const sourceItems = document.querySelectorAll('.source-item');
      sourceItems.forEach((item, i) => {
        if (i === index) {
          item.classList.add('active');
          item.querySelector('.source-status').textContent = 'Active';
        } else {
          item.classList.remove('active');
          item.querySelector('.source-status').textContent = 'Click to switch';
        }
      });
      
      // Load new source with correct URL based on content type
      if (currentMovie && currentMovie.id) {
        const source = streamingSources[index];
        const sourceUrl = currentMovie.mediaType === 'movie' 
          ? source.movieUrl.replace('{id}', currentMovie.id)
          : source.tvUrl.replace('{id}', currentMovie.id);
        loadVideoSource(sourceUrl);
      }
    }

    function loadVideoSource(url) {
      const iframe = document.getElementById('videoIframe');
      iframe.src = url;
      
      // Add sandbox attributes to block popups and navigation
      iframe.setAttribute('sandbox', 'allow-same-origin allow-scripts allow-forms');
      iframe.setAttribute('referrerpolicy', 'no-referrer');
    }

    function hidePlayerPage() {
      document.getElementById('playerPage').style.display = 'none';
      document.getElementById('detailsPage').style.display = 'block';
      document.getElementById('videoIframe').src = '';
      window.scrollTo(0, 0);
    }

    // ===== CONTENT LOADING =====
    async function loadContent() {
      const newReleases = await fetchMovies('/movie/now_playing');
      const trending = await fetchMovies('/trending/all/week');
      const popular = await fetchMovies('/movie/popular');
      const topRated = await fetchMovies('/movie/top_rated');
      const upcoming = await fetchMovies('/movie/upcoming');
      
      const newReleasesContainer = document.getElementById('newReleases');
      const trendingContainer = document.getElementById('trending');
      const popularContainer = document.getElementById('popular');
      const topRatedContainer = document.getElementById('topRated');
      const upcomingContainer = document.getElementById('upcoming');
      
      newReleasesContainer.innerHTML = '';
      newReleases.slice(0, 12).forEach(item => {
        newReleasesContainer.appendChild(createContentCard(item));
      });
      
      if (trending.length === 0) {
        trendingContainer.innerHTML = '<div class="loading">Unable to load content. Please check your API key.</div>';
      } else {
        trendingContainer.innerHTML = '';
        trending.slice(0, 12).forEach(item => {
          trendingContainer.appendChild(createContentCard(item));
        });
      }
      
      popularContainer.innerHTML = '';
      popular.slice(0, 12).forEach(item => {
        popularContainer.appendChild(createContentCard(item));
      });
      
      topRatedContainer.innerHTML = '';
      topRated.slice(0, 12).forEach(item => {
        topRatedContainer.appendChild(createContentCard(item));
      });
      
      upcomingContainer.innerHTML = '';
      upcoming.slice(0, 12).forEach(item => {
        upcomingContainer.appendChild(createContentCard(item));
      });
    }

    // ===== SEARCH FUNCTIONALITY =====
    async function searchContent(query) {
      if (!query.trim()) {
        loadContent();
        return;
      }
      
      try {
        const response = await fetch(`${BASE_URL}/search/multi?api_key=${API_KEY}&query=${encodeURIComponent(query)}`);
        const data = await response.json();
        
        const containers = ['trending', 'popular', 'topRated', 'upcoming'];
        containers.forEach(id => {
          const container = document.getElementById(id);
          container.innerHTML = '';
        });
        
        const trendingContainer = document.getElementById('trending');
        document.querySelector('.section-title').textContent = `Search Results for "${query}"`;
        
        if (data.results.length === 0) {
          trendingContainer.innerHTML = '<div class="loading">No results found.</div>';
        } else {
          data.results.slice(0, 12).forEach(item => {
            trendingContainer.appendChild(createContentCard(item));
          });
        }
      } catch (error) {
        console.error('Search error:', error);
      }
    }

    // ===== VIEW TOGGLE FUNCTIONALITY =====
    let isGridView = true;

    function toggleView() {
      isGridView = !isGridView;
      const contentRows = document.querySelectorAll('.content-row');
      const viewIcon = document.getElementById('viewIcon');
      const viewText = document.getElementById('viewText');

      contentRows.forEach(row => {
        if (isGridView) {
          row.classList.add('grid-view');
        } else {
          row.classList.remove('grid-view');
        }
      });

      if (isGridView) {
        viewIcon.textContent = 'üìã';
        viewText.textContent = 'List View';
      } else {
        viewIcon.textContent = '‚äû';
        viewText.textContent = 'Grid View';
      }
    }



    // Initialize with grid view on page load
    function initializeGridView() {
      const contentRows = document.querySelectorAll('.content-row');
      const viewIcon = document.getElementById('viewIcon');
      const viewText = document.getElementById('viewText');
      
      contentRows.forEach(row => {
        row.classList.add('grid-view');
      });
      
      viewIcon.textContent = 'üìã';
      viewText.textContent = 'List View';
    }

    // ===== EVENT LISTENERS =====
    document.getElementById('backBtn').onclick = hideDetailsPage;
    document.getElementById('backFromCastBtn').onclick = hideCastPage;
    document.getElementById('closePlayerBtn').onclick = hidePlayerPage;
    document.getElementById('viewToggle').onclick = toggleView;

    document.getElementById('searchBtn').onclick = function() {
      const query = document.getElementById('searchInput').value;
      searchContent(query);
    };

    document.getElementById('searchInput').addEventListener('keypress', function(e) {
      if (e.key === 'Enter') {
        e.preventDefault();
        searchContent(this.value);
      }
    });



    window.addEventListener('scroll', function() {
      const navbar = document.getElementById('navbar');
      if (window.scrollY > 50) {
        navbar.classList.add('scrolled');
      } else {
        navbar.classList.remove('scrolled');
      }
    });

    // ===== BLOCK POPUP ADS =====
    // Prevent new windows/tabs from opening
    const originalWindowOpen = window.open;
    window.open = function(url, name, specs) {
      // Block all popup attempts
      return null;
    };

    // Prevent popunders and redirects
    window.addEventListener('beforeunload', function(e) {
      // Allow normal navigation
    });

    // Block context menu on video player to prevent ad tricks
    document.addEventListener('DOMContentLoaded', function() {
      const playerPage = document.getElementById('playerPage');
      if (playerPage) {
        playerPage.addEventListener('contextmenu', function(e) {
          if (e.target.closest('.video-player')) {
            e.preventDefault();
          }
        });
      }
    });

    // Intercept and block popup clicks within iframe (best effort)
    document.addEventListener('click', function(e) {
      if (e.target.closest('.video-player')) {
        // Allow normal video controls
      }
    }, true);

    // ===== INITIALIZE APP =====
    loadContent();

    // Set grid view as default after content loads
    setTimeout(initializeGridView, 100);
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9a19ed1e51b8bc46',t:'MTc2MzY2MjQ1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>